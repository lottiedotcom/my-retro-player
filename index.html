<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Y2K Profile Player</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Comic+Neue:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <style>
        :root {
            --theme-color: #ff0099;
            --theme-bg: #ffe6f2;
            --glass-border: rgba(255, 255, 255, 0.6);
        }

        body {
            background: #222;
            background-size: cover;
            background-position: center;
            font-family: 'Tahoma', sans-serif;
            display: flex; flex-direction: column; align-items: center;
            padding: 20px; margin: 0; min-height: 100vh;
            overflow-x: hidden;
        }

        /* --- THE CAPTURE ZONE --- */
        #capture-zone {
            padding: 20px;
            border-radius: 10px;
            /* This ensures the background captures too if you want */
            background: transparent; 
            display: flex; flex-direction: column; align-items: center;
        }

        /* --- PLAYER CHASSIS --- */
        #player {
            width: 320px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 2px solid var(--glass-border);
            border-top: 2px solid rgba(255,255,255,0.8);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 
                0 15px 35px rgba(0,0,0,0.5),
                inset 0 0 20px rgba(255,255,255,0.2);
            position: relative;
            overflow: hidden;
        }

        /* CRT Scanline Overlay */
        .scanlines {
            position: absolute; top:0; left:0; width:100%; height:100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%);
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 10;
            display: none; /* Hidden by default */
        }

        /* Header */
        .win-header {
            display: flex; justify-content: space-between; color: white;
            font-weight: bold; font-size: 12px; margin-bottom: 10px;
            text-shadow: 1px 1px 2px black;
            cursor: default;
        }

        /* Album Art Box */
        .album-art-container {
            width: 100%; aspect-ratio: 1/1;
            background: #000;
            border-radius: 8px;
            border: 2px inset rgba(255,255,255,0.3);
            margin-bottom: 12px;
            overflow: hidden;
            position: relative;
            cursor: pointer;
        }
        
        #art-img {
            width: 100%; height: 100%; object-fit: cover;
        }
        
        .upload-hint {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: white; text-align: center; font-size: 10px; pointer-events: none;
        }

        /* Song Info */
        .info-screen {
            background: #000;
            border: 2px solid #555;
            border-radius: 4px;
            padding: 8px;
            margin-bottom: 10px;
            color: #00ff00;
            font-family: 'VT323', monospace;
            text-shadow: 0 0 5px #00ff00;
        }
        
        .scrolling-text { white-space: nowrap; overflow: hidden; font-size: 20px; }
        .time-row { display: flex; justify-content: space-between; font-size: 16px; margin-top: 5px; }

        /* Controls */
        .btn-row { display: flex; justify-content: space-between; gap: 5px; }
        .glass-btn {
            flex: 1; padding: 8px 0;
            background: linear-gradient(180deg, rgba(255,255,255,0.4), rgba(255,255,255,0.1));
            border: 1px solid rgba(255,255,255,0.5);
            border-radius: 20px;
            color: white; font-weight: bold; font-size: 10px;
            cursor: pointer; box-shadow: 0 4px 5px rgba(0,0,0,0.2);
        }
        .glass-btn:active { transform: translateY(2px); box-shadow: none; }

        /* Mood Bar */
        .mood-bar {
            margin-top: 15px;
            background: #fff;
            border: 2px solid var(--theme-color);
            border-radius: 50px;
            padding: 5px 15px;
            font-family: 'Comic Neue', cursive;
            font-size: 14px;
            color: var(--theme-color);
            text-align: center;
            box-shadow: 3px 3px 0 rgba(0,0,0,0.2);
        }

        /* --- EDITOR UI --- */
        #editor {
            margin-top: 30px;
            background: rgba(0,0,0,0.8);
            padding: 20px;
            border-radius: 10px;
            color: white;
            text-align: center;
            width: 90%; max-width: 400px;
            border: 1px solid #444;
        }

        .tool-btn {
            background: #444; border: 1px solid #666; color: white;
            padding: 8px 12px; margin: 5px; border-radius: 4px; cursor: pointer;
        }
        .tool-btn:hover { background: #555; }
        
        input[type="file"] { display: none; }
    </style>
</head>
<body>

<div id="capture-zone">
    <div id="player">
        <div class="scanlines" id="scanlines"></div>
        
        <div class="win-header">
            <span>Windows Media Player</span>
            <span>_ ‚ñ° X</span>
        </div>

        <div class="album-art-container" onclick="document.getElementById('art-upload').click()">
            <img id="art-img" src="https://via.placeholder.com/300x300/333/999?text=CLICK+TO+ADD+PHOTO">
        </div>

        <div class="info-screen">
            <div class="scrolling-text" contenteditable="true" spellcheck="false">
                My Chemical Romance - Helena
            </div>
            <div class="time-row">
                <span contenteditable="true">Playing</span>
                <span contenteditable="true">03:26</span>
            </div>
        </div>

        <div class="btn-row">
            <button class="glass-btn">‚èÆ</button>
            <button class="glass-btn">‚èØ</button>
            <button class="glass-btn">‚èπ</button>
            <button class="glass-btn">‚è≠</button>
        </div>

        <div class="mood-bar" contenteditable="true" spellcheck="false">
            Mood: feeling nostalgic... ü•Ä
        </div>
    </div>
</div>

<div id="editor">
    <h3>üõ†Ô∏è CUSTOMIZE</h3>
    
    <input type="file" id="art-upload" accept="image/*" onchange="loadArt(this)">
    <input type="file" id="bg-upload" accept="image/*" onchange="loadBg(this)">

    <button class="tool-btn" onclick="document.getElementById('bg-upload').click()">üñºÔ∏è Set Wallpaper</button>
    <button class="tool-btn" onclick="toggleCRT()">üì∫ CRT Effect</button>
    <button class="tool-btn" onclick="toggleTheme()">üé® Switch Pink/Blue</button>
    
    <br><br>
    <button class="tool-btn" style="background: #00ff00; color: black; font-weight: bold; width: 100%;" onclick="saveImage()">üì∏ SAVE IMAGE</button>
</div>

<script>
    // 1. Load Album Art
    function loadArt(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('art-img').src = e.target.result;
            }
            reader.readAsDataURL(input.files[0]);
        }
    }

    // 2. Load Background Wallpaper
    function loadBg(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function(e) {
                document.body.style.backgroundImage = `url(${e.target.result})`;
            }
            reader.readAsDataURL(input.files[0]);
        }
    }

    // 3. Toggle CRT Scanlines
    function toggleCRT() {
        const scan = document.getElementById('scanlines');
        scan.style.display = scan.style.display === 'block' ? 'none' : 'block';
    }

    // 4. Toggle Theme Colors
    let isPink = true;
    function toggleTheme() {
        const root = document.documentElement;
        if (isPink) {
            // Switch to Blue
            root.style.setProperty('--theme-color', '#0099ff');
            root.style.setProperty('--theme-bg', '#e6f7ff');
            document.querySelector('.info-screen').style.color = '#00ffff';
            document.querySelector('.info-screen').style.textShadow = '0 0 5px #00ffff';
            isPink = false;
        } else {
            // Switch to Pink
            root.style.setProperty('--theme-color', '#ff0099');
            root.style.setProperty('--theme-bg', '#ffe6f2');
            document.querySelector('.info-screen').style.color = '#00ff00';
            document.querySelector('.info-screen').style.textShadow = '0 0 5px #00ff00';
            isPink = true;
        }
    }

    // 5. Save Function
    function saveImage() {
        // Capture the whole zone including background
        const element = document.getElementById('capture-zone');
        
        // Temporarily hide the editor during snap? No need, it's outside capture-zone.
        html2canvas(element, {
            scale: 3,
            backgroundColor: null, // Transparent to let body bg show if captured
            useCORS: true
        }).then(canvas => {
            let link = document.createElement("a");
            link.download = "my-profile-aesthetic.png";
            link.href = canvas.toDataURL("image/png");
            link.click();
        });
    }
</script>

</body>
</html>

