<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Y2K Cyber Player</title>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        :root {
            --silver: #c0c0c0;
            --dark: #444;
            --pink-light: #ffccff;
            --pink-hot: #ff0099;
            --lcd-bg: #000;
            --lcd-text: #00ff00;
        }

        body {
            background: #2d2d2d;
            font-family: 'Tahoma', sans-serif;
            display: flex; flex-direction: column; align-items: center;
            padding: 10px; margin: 0; min-height: 100vh;
        }

        /* --- THE PLAYER (This gets saved) --- */
        #player-skin {
            width: 320px;
            background: var(--silver);
            border: 2px solid #fff;
            border-right-color: #555; border-bottom-color: #555;
            box-shadow: 10px 10px 0 rgba(0,0,0,0.5);
            padding: 4px;
            position: relative;
        }

        /* 1. Title Bar */
        .title-bar {
            background: linear-gradient(90deg, var(--pink-hot), #800040);
            padding: 4px; color: white; font-weight: bold; font-size: 11px;
            display: flex; justify-content: space-between; margin-bottom: 5px;
        }

        /* 2. The LCD Screen */
        .lcd-area {
            background: var(--lcd-bg);
            border: 2px inset #555;
            padding: 10px; margin-bottom: 5px;
            position: relative;
        }

        .lcd-text {
            color: var(--lcd-text);
            font-family: 'VT323', monospace;
            font-size: 22px; white-space: nowrap; overflow: hidden;
            text-shadow: 0 0 5px var(--lcd-text);
        }

        /* Fake Visualizer */
        .viz {
            display: flex; gap: 2px; height: 25px; align-items: flex-end; margin-top: 5px; opacity: 0.8;
        }
        .bar {
            flex: 1; background: var(--lcd-text);
            animation: bounce 0.4s infinite alternate;
        }
        .bar:nth-child(odd) { animation-duration: 0.3s; }
        .bar:nth-child(even) { animation-duration: 0.5s; }
        @keyframes bounce { 0% { height: 10%; } 100% { height: 100%; } }

        /* 3. Controls */
        .controls { display: flex; gap: 3px; margin-bottom: 5px; }
        .btn {
            background: var(--silver); flex: 1;
            border: 2px outset #fff; font-size: 10px; font-weight: bold;
            cursor: pointer; padding: 5px 0;
        }
        .btn:active { border: 2px inset #fff; }

        /* 4. The Playlist */
        .playlist-box {
            background: #000;
            border: 2px inset #555;
            height: 180px; overflow-y: hidden;
            font-family: 'VT323', monospace; color: var(--pink-light);
            font-size: 16px;
        }

        .pl-row {
            display: flex; padding: 2px 5px; cursor: text;
        }
        .pl-row:hover { background: #333; }
        .pl-idx { width: 25px; color: #888; }
        .pl-song { flex: 1; white-space: nowrap; overflow: hidden; }
        .pl-time { width: 35px; text-align: right; color: var(--pink-hot); }

        /* --- THE INPUT AREA (Hidden in photo) --- */
        #input-area {
            width: 320px; background: #fff; padding: 15px; margin-top: 20px;
            border-radius: 8px; box-sizing: border-box;
        }
        textarea {
            width: 100%; height: 100px; padding: 10px; box-sizing: border-box;
            border: 2px solid #ccc; font-size: 12px;
            margin-bottom: 10px;
        }
        .action-btn {
            width: 100%; padding: 12px; background: var(--pink-hot); color: white;
            border: none; font-weight: bold; cursor: pointer; border-radius: 4px;
            margin-bottom: 5px;
        }

    </style>
</head>
<body>

<div id="player-skin">
    <div class="title-bar">
        <span>WinAmp_Player_v2.exe</span>
        <span>X</span>
    </div>

    <div class="lcd-area">
        <div class="lcd-text" id="now-playing">*** WAITING FOR MUSIC ***</div>
        <div class="viz">
            <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
            <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
            <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
        </div>
        <div style="color:#00ff00; font-family:'VT323'; font-size:14px; margin-top:2px; display:flex; justify-content:space-between;">
            <span>128kbps</span>
            <span>00:00</span>
        </div>
    </div>

    <div class="controls">
        <button class="btn">PREV</button>
        <button class="btn">PLAY</button>
        <button class="btn">PAUSE</button>
        <button class="btn">STOP</button>
        <button class="btn">NEXT</button>
    </div>

    <div class="playlist-box" id="pl-container">
        <div class="pl-row"><span class="pl-idx">1.</span><span class="pl-song">Paste text below...</span><span class="pl-time">0:00</span></div>
        <div class="pl-row"><span class="pl-idx">2.</span><span class="pl-song">...and click Generate!</span><span class="pl-time">0:00</span></div>
    </div>
</div>

<div id="input-area">
    <h3 style="margin-top:0; color:#333;">üìù Smart Paste</h3>
    <p style="font-size:11px; color:#666;">Copy your playlist text (from Spotify/Notes) and paste it here. I will try to clean it up!</p>
    
    <textarea id="raw-text" placeholder="Example:&#10;Toxic - Britney Spears&#10;Numb - Linkin Park"></textarea>
    
    <button class="action-btn" onclick="smartParse()">‚ú® Make It Cute</button>
    <button class="action-btn" style="background:#444;" onclick="saveImage()">üíæ Save Image</button>
</div>

<script>
    function smartParse() {
        const raw = document.getElementById('raw-text').value;
        const container = document.getElementById('pl-container');
        
        // 1. Split by lines
        let lines = raw.split('\n');
        
        // 2. Filter Junk (Remove empty lines, "Lyrics", short timestamps)
        lines = lines.filter(line => {
            let l = line.trim();
            // Filter out common Spotify junk
            if (l.length < 2) return false;
            if (l.includes("Spotify")) return false;
            if (l.match(/^\d+:\d+$/)) return false; // Removes just timestamps like "3:20"
            return true;
        });

        // 3. Render
        container.innerHTML = "";
        
        if (lines.length > 0) {
            document.getElementById('now-playing').innerText = "*** " + lines[0] + " ***";
        }

        lines.forEach((line, i) => {
            // Fake Time Generator
            let min = Math.floor(Math.random() * 3) + 2;
            let sec = Math.floor(Math.random() * 60);
            if(sec < 10) sec = "0" + sec;

            // Clean the text slightly
            let cleanText = line.replace(/http\S+/g, "").substring(0, 35);

            let row = `
            <div class="pl-row">
                <span class="pl-idx">${i + 1}.</span>
                <span class="pl-song" contenteditable="true">${cleanText}</span>
                <span class="pl-time" contenteditable="true">${min}:${sec}</span>
            </div>`;
            container.innerHTML += row;
        });
    }

    function saveImage() {
        html2canvas(document.getElementById('player-skin'), { scale: 3, backgroundColor: null }).then(canvas => {
            let link = document.createElement("a");
            link.download = "y2k-playlist.png";
            link.href = canvas.toDataURL("image/png");
            link.click();
        });
    }
</script>

</body>
</html>

